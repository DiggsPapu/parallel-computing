# Define the compiler and the executable name
CC = mpicc
TARGET = riemann_mpi
SRC = riemann_mpi.c

# Compilation flags (if any additional flags are needed, add them here)
CFLAGS = -lm

# Default rule to compile the code
all: $(TARGET)

# Compile the source file into an executable
$(TARGET): $(SRC)
	$(CC) -o $(TARGET) $(SRC) $(CFLAGS)

# Rule to run the executable with 4 processes
run: $(TARGET)
	mpiexec --allow-run-as-root -n 4 ./$(TARGET) 10 20

# Clean the directory by removing the compiled executable
clean:
	rm -f $(TARGET)

# Phony targets
.PHONY: all run clean
